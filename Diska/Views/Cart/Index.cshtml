@using System.Globalization
@{
    bool isAr = CultureInfo.CurrentCulture.Name.StartsWith("ar");
    ViewData["Title"] = isAr ? "سلة المشتريات" : "Shopping Cart";
}

<section class="section-padding cart-section">
    <div class="container">
        <h2 class="page-title">@(isAr ? "سلة المشتريات" : "Shopping Cart")</h2>

        <div class="cart-layout" style="display:grid; grid-template-columns: 2fr 1fr; gap:30px;">

            <!-- Items List -->
            <div class="cart-items-container">
                <div id="cartItemsList">
                    <!-- Items injected via JS -->
                    <div style="text-align:center; padding:40px; color:#666;">
                        <i class="fas fa-spinner fa-spin fa-2x"></i>
                        <p>@(isAr ? "جاري تحميل السلة..." : "Loading cart...")</p>
                    </div>
                </div>
            </div>

            <!-- Summary -->
            <div class="cart-summary-box" style="background:#f8fafc; padding:25px; border-radius:12px; height:fit-content; border:1px solid #e2e8f0;">
                <h3 style="margin-bottom:20px; color:var(--primary);">@(isAr ? "ملخص الطلب" : "Order Summary")</h3>

                <div style="display:flex; justify-content:space-between; margin-bottom:15px;">
                    <span>@(isAr ? "المجموع الفرعي" : "Subtotal")</span>
                    <span id="cartSubtotal" style="font-weight:bold;">0.00</span>
                </div>

                <div style="display:flex; justify-content:space-between; margin-bottom:15px; color:#666; font-size:0.9rem;">
                    <span>@(isAr ? "الضريبة (14%)" : "VAT (14%)")</span>
                    <span>@(isAr ? "شامل الضريبة" : "Inclusive")</span>
                </div>

                <hr style="border:0; border-top:1px solid #ddd; margin:15px 0;">

                <div style="display:flex; justify-content:space-between; margin-bottom:20px; font-size:1.2rem;">
                    <strong>@(isAr ? "الإجمالي" : "Total")</strong>
                    <strong id="cartTotal" style="color:var(--primary);">0.00</strong>
                </div>

                <a asp-action="Checkout" class="btn primary w-100" style="text-align:center; display:block; text-decoration:none;">
                    @(isAr ? "متابعة الشراء" : "Proceed to Checkout") <i class="fas fa-arrow-left"></i>
                </a>

                <a asp-controller="Home" asp-action="Index" style="display:block; text-align:center; margin-top:15px; color:#666; text-decoration:none; font-size:0.9rem;">
                    @(isAr ? "العودة للتسوق" : "Continue Shopping")
                </a>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            renderCartPage();
        });
    </script>
}