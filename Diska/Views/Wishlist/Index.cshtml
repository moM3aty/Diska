@model IEnumerable<Diska.Models.WishlistItem>
@using System.Globalization
@{
    bool isAr = CultureInfo.CurrentCulture.Name.StartsWith("ar");
    ViewData["Title"] = isAr ? "المفضلة" : "Wishlist";
}

<section class="section-padding">
    <div class="container">
        <h2 class="page-title">@(isAr ? "المنتجات المفضلة ❤️" : "My Wishlist ❤️")</h2>

        @if (!Model.Any())
        {
            <div style="text-align:center; padding:50px; background:#f8fafc; border-radius:10px;">
                <i class="fas fa-heart-broken fa-3x" style="color:#cbd5e1; margin-bottom:15px;"></i>
                <p style="color:#64748b;">@(isAr ? "قائمة المفضلة فارغة." : "Your wishlist is empty.")</p>
                <a asp-controller="Home" asp-action="Index" class="btn primary small">@(isAr ? "تصفح المنتجات" : "Browse Products")</a>
            </div>
        }
        else
        {
            <div class="products-grid">
                @foreach (var item in Model)
                {
                    <div class="product-card" data-id="@item.Product.Id" data-stock="@item.Product.StockQuantity">
                        <div class="product-img">
                            <a asp-controller="Product" asp-action="Details" asp-route-id="@item.Product.Id">
                                <img src="~/@item.Product.ImageUrl" alt="@item.Product.Name">
                            </a>
                        </div>

                        <div class="product-info">
                            <a asp-controller="Product" asp-action="Details" asp-route-id="@item.Product.Id" style="color:inherit; text-decoration:none;">
                                <h4>@(isAr? item.Product.Name : (item.Product.NameEn ?? item.Product.Name))</h4>
                            </a>

                            <div class="pricing">
                                <span class="current-price">@item.Product.Price.ToString("N2") @(isAr ? "ج.م" : "EGP")</span>
                            </div>

                            <div style="display:flex; gap:10px; margin-top:10px;">
                                <button class="btn primary w-100 add-btn" onclick="addToCart(this)">
                                    @(isAr ? "إضافة للسلة" : "Add to Cart")
                                </button>
                                <form asp-action="Remove" method="post" style="width: 40px;">
                                    <input type="hidden" name="id" value="@item.Id" />
                                    <button type="submit" class="btn btn-delete" style="width:100%; height:100%; background:#fee2e2; color:red; border:none; border-radius:5px;">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
    </div>
</section>