@model IEnumerable<Diska.Models.Product>

@{
    ViewData["Title"] = "نتائج البحث: " + ViewBag.SearchQuery;
}

<section class="section-padding">
    <div class="container">
        <div class="section-header">
            <h3>نتائج البحث عن: "@ViewBag.SearchQuery"</h3>
            <span style="color:#666;">(@Model.Count() منتج)</span>
        </div>

        @if (!Model.Any())
        {
            <div style="text-align:center; padding:50px; background:#fff; border-radius:10px; border:1px solid #eee;">
                <i class="fas fa-search" style="font-size:3rem; color:#ddd; margin-bottom:20px;"></i>
                <h3>لم يتم العثور على منتجات</h3>
                <p style="color:#666;">جرب البحث بكلمات مختلفة أو تصفح الأقسام الرئيسية.</p>
                <a asp-action="Index" class="btn primary" style="margin-top:20px;">العودة للرئيسية</a>
            </div>
        }
        else
        {
            <div class="products-grid">
                @foreach (var item in Model)
                {
                    <div class="product-card merchant-product" data-id="@item.Id" data-stock="@item.StockQuantity">
                        <button class="fav-btn"><i class="fas fa-heart"></i></button>
                        @if (item.OldPrice > item.Price)
                        {
                            <div class="flash-badge"><i class="fas fa-star"></i> عرض</div>
                        }

                        <a asp-controller="Product" asp-action="Details" asp-route-id="@item.Id">
                            <div class="product-img"><img src="~/@item.ImageUrl" alt="@item.Name"></div>
                        </a>

                        <div class="product-info">
                            <div class="in-cart-indicator"></div>
                            <a asp-controller="Product" asp-action="Details" asp-route-id="@item.Id" style="color:inherit;">
                                <h4>@item.Name</h4>
                            </a>
                            <div class="product-meta">
                                <span><i class="fas fa-box-open"></i> @item.UnitsPerCarton / كرتونة</span>
                            </div>
                            <div class="pricing">
                                <span class="current-price">@item.Price.ToString("F2") ج.م</span>
                            </div>
                            <div class="card-actions" style="display:flex; gap:10px; margin-top:10px;">
                                <div class="qty-control-card" style="display:flex; border:1px solid #ddd; border-radius:5px;">
                                    <button class="card-minus" style="border:none; background:#eee; width:30px;">-</button>
                                    <input type="number" class="manual-qty" value="1" min="1" max="@item.StockQuantity" style="width:50px; text-align:center; border:none; font-weight:bold;">
                                    <button class="card-plus" style="border:none; background:#eee; width:30px;">+</button>
                                </div>
                                <button class="add-btn" style="flex:1; border:none; background:var(--primary); color:#fff; border-radius:5px;">
                                    أضف <i class="fas fa-cart-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
    </div>
</section>