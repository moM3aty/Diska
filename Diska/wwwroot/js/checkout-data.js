// بيانات المحافظات والمناطق في مصر (لصفحة الدفع)
const egyptData = {
    "القاهرة": ["مدينة نصر", "مصر الجديدة", "التجمع الخامس", "المعادي", "وسط البلد", "شبرا", "عين شمس", "المرج", "حلوان", "المقطم", "الرحاب", "مدينتي", "الشروق", "حدائق القبة"],
    "الجيزة": ["الدقي", "المهندسين", "الهرم", "فيصل", "6 أكتوبر", "الشيخ زايد", "إمبابة", "الوراق", "المنيب", "العجوزة", "أبو النمرس"],
    "الإسكندرية": ["سموحة", "ميامي", "المنتزه", "محطة الرمل", "العجمي", "سيدي جابر", "العصافرة", "لوران", "كامب شيزار", "برج العرب"],
    "القليوبية": ["بنها", "شبرا الخيمة", "قليوب", "طوخ", "القناطر الخيرية", "الخانكة", "العبور", "كفر شكر"],
    "الدقهلية": ["المنصورة", "ميت غمر", "السنبلاوين", "طلخا", "بلقاس", "دكرنس", "شربين", "أجا"],
    "الشرقية": ["الزقازيق", "العشر من رمضان", "منيا القمح", "بلبيس", "فاقوس", "أبو حماد", "ديرب نجم", "كفر صقر"],
    "الغربية": ["طنطا", "المحلة الكبرى", "كفر الزيات", "زفتى", "السنطة", "بسيون", "قطور"],
    "المنوفية": ["شبين الكوم", "منوف", "أشمون", "قويسنا", "بركة السبع", "تلا", "الباجور", "الشهداء"],
    "البحيرة": ["دمنهور", "كفر الدوار", "إيتاي البارود", "رشيد", "كوم حمادة", "أبو حمص", "حوش عيسى", "الدلنجات"],
    "الإسماعيلية": ["الإسماعيلية", "فايد", "القنطرة شرق", "القنطرة غرب", "التل الكبير", "أبو صوير"],
    "السويس": ["السويس", "الأربعين", "الجناين", "عتاقة", "العين السخنة"],
    "بورسعيد": ["بورسعيد", "بورفؤاد", "حي الشرق", "حي الزهور", "حي العرب"],
    "دمياط": ["دمياط", "رأس البر", "فارسكور", "الزرقا", "دمياط الجديدة", "كفر سعد"],
    "كفر الشيخ": ["كفر الشيخ", "دسوق", "فوه", "مطوبس", "بلطيم", "سيدي سالم", "الحامول"],
    "أسوان": ["أسوان", "كوم أمبو", "إدفو", "دراو", "نصر النوبة", "أبو سمبل"]
};

document.addEventListener('DOMContentLoaded', () => {
    const govSelect = document.getElementById('govSelect');
    const citySelect = document.getElementById('citySelect');

    if (govSelect) {
        // تفريغ القائمة أولاً
        govSelect.innerHTML = '<option value="" disabled selected>-- اختر المحافظة --</option>';

        // ملء المحافظات
        for (let gov in egyptData) {
            let option = document.createElement('option');
            option.value = gov;
            option.innerText = gov;
            govSelect.appendChild(option);
        }

        // عند تغيير المحافظة
        govSelect.addEventListener('change', function () {
            const selectedGov = this.value;
            const cities = egyptData[selectedGov];

            citySelect.innerHTML = '<option value="" disabled selected>-- اختر المنطقة --</option>';

            if (cities) {
                cities.forEach(city => {
                    let option = document.createElement('option');
                    option.value = city;
                    option.innerText = city;
                    citySelect.appendChild(option);
                });
                citySelect.disabled = false;
            } else {
                citySelect.disabled = true;
            }

            // تحديث مصاريف الشحن في cart.js إذا كانت الدالة موجودة
            if (typeof updateShippingCost === "function") {
                // updateShippingCost(); // تم ربطها بحدث onchange في الـ HTML بالفعل
            }
        });
    }
});