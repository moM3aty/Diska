@{
    ViewData["Title"] = "لوحة التاجر";
    Layout = "_MerchantLayout";
}

<div class="row g-4 mb-4">
    <!-- Sales Widget -->
    <div class="col-md-3">
        <div class="stat-card">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <span class="text-muted fw-bold">مبيعاتي</span>
                <i class="fas fa-wallet text-success fa-lg"></i>
            </div>
            <h3 class="mb-0">@(((decimal)ViewBag.TotalSales).ToString("N0")) <small class="fs-6">ج.م</small></h3>
        </div>
    </div>

    <!-- Products Widget -->
    <div class="col-md-3">
        <div class="stat-card">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <span class="text-muted fw-bold">منتجاتي</span>
                <i class="fas fa-box text-primary fa-lg"></i>
            </div>
            <h3 class="mb-0">@ViewBag.TotalProducts</h3>
            <small class="text-success">@ViewBag.ActiveProducts نشط</small>
        </div>
    </div>

    <!-- Orders Widget -->
    <div class="col-md-3">
        <div class="stat-card">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <span class="text-muted fw-bold">عدد الطلبات</span>
                <i class="fas fa-shopping-bag text-info fa-lg"></i>
            </div>
            <h3 class="mb-0">@ViewBag.TotalOrders</h3>
        </div>
    </div>

    <!-- Wallet Widget -->
    <div class="col-md-3">
        <div class="stat-card bg-primary text-white border-0">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <span class="fw-bold opacity-75">رصيد المحفظة</span>
                <i class="fas fa-coins fa-lg"></i>
            </div>
            <h3 class="mb-0">@(((decimal)ViewBag.WalletBalance).ToString("N0")) <small class="fs-6">ج.م</small></h3>
            <small class="opacity-75">قابل للسحب</small>
        </div>
    </div>
</div>

<!-- Recent Orders Table -->
<div class="card border-0 shadow-sm">
    <div class="card-header bg-white py-3">
        <h5 class="mb-0 fw-bold text-primary">أحدث الطلبات الواردة</h5>
    </div>
    <div class="table-responsive">
        <table class="table align-middle mb-0">
            <thead class="bg-light">
                <tr>
                    <th>رقم الطلب</th>
                    <th>العميل</th>
                    <th>قيمة منتجاتك</th>
                    <th>الحالة</th>
                    <th>التاريخ</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in ViewBag.RecentOrders)
                {
                    <tr>
                        <td class="fw-bold">#@item.Id</td>
                        <td>@item.CustomerName</td>
                        <td class="text-success fw-bold">@item.Total.ToString("N0") ج.م</td>
                        <td>
                            <span class="badge bg-secondary">@item.Status</span>
                        </td>
                        <td class="text-muted small">@item.OrderDate.ToString("yyyy/MM/dd")</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>