@model IEnumerable<Diska.Models.ApplicationUser>
@{
    ViewData["Title"] = "فريق العمل";
    Layout = "_MerchantLayout";
    bool isAr = System.Globalization.CultureInfo.CurrentCulture.Name.StartsWith("ar");
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h2 class="fw-bold mb-1" style="color:var(--text-main)">@(isAr ? "فريق العمل" : "Staff Members")</h2>
        <p class="text-muted small mb-0">@(isAr ? "إدارة الموظفين وصلاحيات الوصول" : "Manage staff access and permissions")</p>
    </div>
    <a asp-action="Create" class="btn btn-primary px-4 py-2 rounded-pill fw-bold shadow-sm">
        <i class="fas fa-user-plus me-2"></i> @(isAr ? "إضافة موظف" : "Add Staff")
    </a>
</div>

<style>
    .staff-card {
        background: var(--bg-card);
        border: 1px solid var(--border-color);
        border-radius: 16px;
        box-shadow: var(--shadow-sm);
        overflow: hidden;
    }

    .avatar-initial {
        width: 40px;
        height: 40px;
        background: rgba(79, 70, 229, 0.1);
        color: var(--primary-color);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 800;
        font-size: 1.1rem;
    }

    .table thead th {
        background-color: rgba(0,0,0,0.02);
        color: var(--text-muted);
        font-weight: 700;
        text-transform: uppercase;
        font-size: 0.75rem;
        padding: 18px 24px;
        border-bottom: 1px solid var(--border-color);
    }

    [data-bs-theme="dark"] .table thead th {
        background-color: rgba(255,255,255,0.05);
    }

    .table tbody td {
        padding: 18px 24px;
        vertical-align: middle;
        border-bottom: 1px solid var(--border-color);
        color: var(--text-main);
    }
</style>

@if (!Model.Any())
{
    <div class="text-center py-5 rounded-4 border border-dashed" style="border-color: var(--border-color)!important;">
        <div class="text-muted opacity-25 mb-3"><i class="fas fa-users-slash fa-4x"></i></div>
        <h4 class="text-muted">@(isAr ? "لا يوجد موظفين حالياً" : "No staff members found")</h4>
        <p class="text-muted small">@(isAr ? "يمكنك إضافة موظفين لمساعدتك في إدارة المتجر." : "Add staff members to help manage your store.")</p>
    </div>
}
else
{
    <div class="staff-card">
        <div class="table-responsive">
            <table class="table align-middle mb-0">
                <thead>
                    <tr>
                        <th class="ps-4">@(isAr ? "الموظف" : "Name")</th>
                        <th>@(isAr ? "رقم الهاتف" : "Phone")</th>
                        <th>@(isAr ? "الصلاحيات" : "Role")</th>
                        <th>@(isAr ? "الحالة" : "Status")</th>
                        <th class="text-end pe-4">@(isAr ? "إجراءات" : "Actions")</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var user in Model)
                    {
                        <tr>
                            <td class="ps-4">
                                <div class="d-flex align-items-center gap-3">
                                    <div class="avatar-initial">@user.FullName?.FirstOrDefault().ToString().ToUpper()</div>
                                    <div>
                                        <div class="fw-bold">@user.FullName</div>
                                        <small class="text-muted">@user.Email</small>
                                    </div>
                                </div>
                            </td>
                            <td>@user.PhoneNumber</td>
                            <td>
                                <span class="badge bg-info bg-opacity-10 text-info border border-info border-opacity-25">Staff</span>
                            </td>
                            <td>
                                <span class="badge bg-success bg-opacity-10 text-success border border-success border-opacity-25">@(isAr ? "نشط" : "Active")</span>
                            </td>
                            <td class="text-end pe-4">
                                <button class="btn btn-sm btn-outline-danger border-0" onclick="return confirm('حذف الموظف؟')">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
}